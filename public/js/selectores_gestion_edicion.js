$(document).ready(function(){

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE CLIENTES */
    $(".cliente").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE TIPOS CLIENTES */
    $(".tipo_cliente").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE TIPO DE EVENTOS */
    $(".tipo_evento").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE TIPO DE DOCUMENTO */
    $(".tipo_documento").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE TIPO DE DOCUMENTO BENEFICIARIO */
    $(".afi_tipo_documento").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE GÉNERO */
    $(".genero").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE ESTADO CIVIL */
    $(".estado_civil").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE NIVEL ESCOLAR */
    $(".nivel_escolar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE DOMINANCIA */
    $(".dominancia").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE DEPARTAMENOS (INFORMACIÓN AFILIADO) */
    $(".departamento_info_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE MUNCIPIOS (INFORMACIÓN AFILIADO) */
    $(".municipio_info_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE DEPARTAMENOS (INFORMACIÓN AFILIADO) */
    $(".afi_departamento_info_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE MUNCIPIOS (INFORMACIÓN AFILIADO) */
    $(".afi_municipio_info_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE TIPOS DE AFILIADO */
    $(".tipo_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE EPS */
    $(".eps").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE AFP */
    $(".afp").select2({
        width: '100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

     /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE AFP conocimiento */
     $(".afp_conocimiento").select2({
        width: '100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE Entidad de conocimiento */
    $("[id^=entidad_conocimiento_]").select2({
        width: '100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE ARL (INFORMACIÓN AFILIADO) */
    $(".arl_info_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE APODERADO */
    $(".apoderado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE ACTIVO */
    $(".activo").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DE MEDIO DE NOTIFICACION AFILIADO */
    $(".medio_notificacion_afiliado").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO ARL (INFORMACIÓN LABORAL) */
    $(".arl_info_laboral").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO ARL MODAL (INFORMACIÓN LABORAL) */
    $(".arl_info_laboral_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
        // dropdownParent: $('#myModal')
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DEPARTAMENTO (INFORMACIÓN LABORAL) */
    $(".departamento_info_laboral").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO DEPARTAMENTO MODAL (INFORMACIÓN LABORAL) */
    $(".departamento_info_laboral_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO MUNICIPIO (INFORMACIÓN LABORAL) */
    $(".municipio_info_laboral").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO MUNICIPIO MODAL (INFORMACIÓN LABORAL) */
    $(".municipio_info_laboral_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO ACTIVIDAD ECONOMICA */
    $(".actividad_economica").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO ACTIVIDAD ECONOMICA MODAL */
    $(".actividad_economica_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO CLASE RIESGO */
    $(".clase_riesgo").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO CLASE RIESGO MODAL */
    $(".clase_riesgo_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO CIUO */
    $(".codigo_ciuo").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE MEDIO NOTIFICACION LABORAL */
    $(".medio_notificacion_laboral").select2({
        width:'100%',
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO CIUO MODAL */
    $(".codigo_ciuo_registrar").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO MOTIVO SOLICITUD */
    $(".motivo_solicitud").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO TIPO DE VINCULO */
    $(".tipovinculo").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO REGIMEN */
    $(".regimen").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO SOLICITANTE */
    $(".solicitante").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO NOMBRE SOLICITANTE */
    $(".nombre_solicitante").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO FUENTE DE INFORMACION */
    $(".fuente_informacion").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO PROCESO */
    $(".proceso").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO SERVICIO */
    $(".servicio").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* INICIALIZACIÓN DEL SELECT2 DE LISTADO ACCION */
    $(".accion").select2({
        placeholder: "Seleccione una opción",
        allowClear: false
    });

    /* FUNCIONALIDAD DESCARGA DOCUMENTO */
    $("a[id^='btn_generar_descarga_']").click(function(){
        var id_documento = $(this).data('id_documento_descargar');
        var nombre_documento = $("#nombre_documento_descarga_"+id_documento).val();
        var extension_documento = $("#extension_documento_descarga_"+id_documento).val();
        var id_evento = nombre_documento.match(/\d+/g).join('');
    
        // Crear un enlace temporal para la descarga
        var enlaceDescarga = document.createElement('a');
        enlaceDescarga.href = '/descargar-archivo/'+nombre_documento+'.'+extension_documento+'/'+id_evento;
        enlaceDescarga.target = '_self'; // Abrir en una nueva ventana/tab
        enlaceDescarga.style.display = 'none';
        document.body.appendChild(enlaceDescarga);
    
        // Simular clic en el enlace para iniciar la descarga
        enlaceDescarga.click();
    
        // Eliminar el enlace después de la descarga
        setTimeout(function() {
            document.body.removeChild(enlaceDescarga);
        }, 1000);
    });

    /* VALIDACIÓN CUANDO SE ESCRIBA EL NOMBRE DEL AFILIADO SIEMPRE SEA EN MAYUSCULA */
    $('#nombre_afiliado').keyup(function(){
        $('#nombre_afiliado').val($(this).val().toUpperCase());
    });

    $('#afi_nombre_afiliado').keyup(function(){
        $('#afi_nombre_afiliado').val($(this).val().toUpperCase());
    });


    /* VALIDACIÓN CUANDO SE ESCRIBA EL NOMBRE DEL APODERADO SIEMPRE SEA EN MAYUSCULA */
    $('#nombre_apoderado').keyup(function(){
        $('#nombre_apoderado').val($(this).val().toUpperCase());
    });

    /* VALIDACIÓN CUANDO SE ESCRIBA LA EMPRESA SIEMPRE SEA EN MAYUSCULA */
    $('#empresa').keyup(function(){
        $('#empresa').val($(this).val().toUpperCase());
    });

    /* LLENADO DE SELECTORES PRINCIPALES */
    let token = $('input[name=_token]').val();

    // listado de clientes
    let datos_lista_clientes = {
        '_token': token,
        'parametro' : "lista_clientes"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_clientes,
        success:function(data) {
            // console.log(data);            
            let clienteEdicion = $('select[name=cliente]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Cliente"] != clienteEdicion) {
                    $('#cliente').append('<option value="'+data[claves[i]]["Id_Cliente"]+'">'+data[claves[i]]["Nombre_cliente"]+'</option>');
                }
            }
        }
    });
    // listado de tipos de clientes
    let datos_lista_tipo_clientes = {
        '_token': token,
        'parametro' : "lista_tipo_clientes"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_clientes,
        success:function(data) {
            // console.log(data);
            let Id_TipoClienteEdicion = $('select[name=tipo_cliente]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_TipoCliente"] != Id_TipoClienteEdicion) {
                    $('#tipo_cliente').append('<option value="'+data[claves[i]]["Id_TipoCliente"]+'">'+data[claves[i]]["Nombre_tipo_cliente"]+'</option>');                    
                }
            }
        }
    });

    // listado tipo de evento
    let datos_lista_tipo_evento = {
        '_token': token,
        'parametro' : "lista_tipo_evento"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_evento,
        success:function(data) {
            // console.log(data);
            let tipo_eventoEdicion = $('select[name=tipo_evento]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Evento"] != tipo_eventoEdicion) {
                    $('#tipo_evento').append('<option value="'+data[claves[i]]["Id_Evento"]+'">'+data[claves[i]]["Nombre_evento"]+'</option>');                    
                }
            }
        }
    });

    // listado tipos de documento
    let datos_lista_tipo_documento = {
        '_token': token,
        'parametro' : "lista_tipo_documento"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_documento,
        success:function(data) {
            // console.log(data);
            let tipo_documentoEdicion = $('select[name=tipo_documento]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != tipo_documentoEdicion) {
                    $('#tipo_documento').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });
    // listado tipos de documento beneficiario
    let datos_lista_tipo_documento_benefi = {
        '_token': token,
        'parametro' : "lista_tipo_documento"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_documento_benefi,
        success:function(data) {
            // console.log(data);
            //Validamos si el tipo de documento del afiliado ya fue guardado anteriormente
            if($('#afi_tipo_documento').val()){
                //Por medio de find buscamos el tipo de documento que fue guardado y lo asignamos como valor por defecto al selector
                let optionSelected = data.find(finder => finder.Id_Parametro === parseInt($('#afi_tipo_documento').val()));
                $("#afi_tipo_documento").val(optionSelected?.Id_Parametro);
                $('#afi_tipo_documento').empty();
                $('#afi_tipo_documento').append('<option value="'+optionSelected?.Id_Parametro+'" selected>'+optionSelected?.Nombre_parametro+'</option>');
                let SelectorTipoDocumentoAfiliado = $('select[name=afi_tipo_documento]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]['Id_Parametro'] != SelectorTipoDocumentoAfiliado) {
                        $('#afi_tipo_documento').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                    }   
                }
            }
            else{
                $('#afi_tipo_documento').empty();
                $('#afi_tipo_documento').append('<option value="" selected>Seleccione</option>');
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    $('#afi_tipo_documento').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });
    // listado generos
    let datos_lista_generos = {
        '_token': token,
        'parametro' : "genero"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_generos,
        success:function(data) {
            // console.log(data);
            let generoEdicion = $('select[name=genero]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != generoEdicion) {
                    $('#genero').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });

    // listado estado civil
    let datos_lista_estado_civil = {
        '_token': token,
        'parametro' : "estado_civil"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_estado_civil,
        success:function(data) {
            // console.log(data);
            let estado_civilEdicion = $('select[name=estado_civil]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != estado_civilEdicion) {
                    $('#estado_civil').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });
    // listado nivel escolar
    let datos_lista_nivel_escolar = {
        '_token': token,
        'parametro' : "nivel_escolar"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_nivel_escolar,
        success:function(data) {
            // console.log(data);
            let nivel_escolarEdicion = $('select[name=nivel_escolar]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != nivel_escolarEdicion) {
                    $('#nivel_escolar').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });
    // listado dominancia
    let datos_lista_dominancia = {
        '_token': token,
        'parametro' : "dominancia"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_dominancia,
        success:function(data) {
            // console.log(data);
            let dominanciaEdicion = $('select[name=dominancia]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Dominancia"] != dominanciaEdicion) {
                    $('#dominancia').append('<option value="'+data[claves[i]]["Id_Dominancia"]+'">'+data[claves[i]]["Nombre_dominancia"]+'</option>');                    
                }
            }
        }
    });

    // listado Departamentos (Informacion Afiliado)
    let datos_lista_departamentos_info_afiliado = {
        '_token': token,
        'parametro' : "departamentos_info_afiliado"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_departamentos_info_afiliado,
        success:function(data) {
            // console.log(data);
            let departamento_info_afiliadoEdicion = $('select[name=departamento_info_afiliado]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_departamento"] != departamento_info_afiliadoEdicion) {
                    $('#departamento_info_afiliado').append('<option value="'+data[claves[i]]["Id_departamento"]+'">'+data[claves[i]]["Nombre_departamento"]+'</option>');                    
                }
            }
        }
    });

    // listado municipios dependiendo del departamentos (informacion afiliado)
    if ($('select[name=municipio_info_afiliado]').val() != "") {
        $('#municipio_info_afiliado').prop('disabled', false);
        let id_departamento_info_afiliado = $('#departamento_info_afiliado').val();
        let datos_lista_municipios_info_afiliado = {
            '_token': token,
            'parametro' : "municipios_info_afiliado",
            'id_departamento_info_afiliado': id_departamento_info_afiliado
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_lista_municipios_info_afiliado,
            success:function(data) {
                let municipio_info_afiliadoEdicion = $('select[name=municipio_info_afiliado]').val();
                $('#municipio_info_afiliado').empty();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_municipios"] != municipio_info_afiliadoEdicion) {
                        $('#municipio_info_afiliado').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }else{
                        $('#municipio_info_afiliado').append('<option value="'+data[claves[i]]["Id_municipios"]+'" selected>'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }
                }
            }
        });
    }
    $('#departamento_info_afiliado').change(function(){
        $('#municipio_info_afiliado').prop('disabled', false);
        let id_departamento_info_afiliado = $('#departamento_info_afiliado').val();
        let datos_lista_municipios_info_afiliado = {
            '_token': token,
            'parametro' : "municipios_info_afiliado",
            'id_departamento_info_afiliado': id_departamento_info_afiliado
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_lista_municipios_info_afiliado,
            success:function(data) {
                // console.log(data);
                $('#municipio_info_afiliado').empty();
                $('#municipio_info_afiliado').append('<option value="">Seleccione</option>');
                let municipio_info_afiliadoEdicion = $('select[name=municipio_info_afiliado]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_municipios"] != municipio_info_afiliadoEdicion) {
                        $('#municipio_info_afiliado').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }
                }
            }
        });
    });

    // listado Departamentos (Informacion Afiliado / Beneficiario)
    let datos_lista_departamentos_info_afiliado_benefi = {
        '_token': token,
        'parametro' : "departamentos_info_afiliado"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_departamentos_info_afiliado_benefi,
        success:function(data) {
            // console.log(data);
            //Validamos si el departamento afiliado ya fue guardado anteriormente
            if($('#afi_departamento_info_afiliado').val()){
                //Por medio de find buscamos el departamento que fue guardado y lo asignamos como valor por defecto al selector
                let optionSelected = data.find(finder => finder.Id_departamento === parseInt($('#afi_departamento_info_afiliado').val()));
                $("#afi_departamento_info_afiliado").val(optionSelected?.Id_departamento);
                $('#afi_departamento_info_afiliado').empty();
                $('#afi_departamento_info_afiliado').append('<option value="'+optionSelected?.Id_departamento+'" selected>'+optionSelected?.Nombre_departamento+'</option>');
                let SelectorDepartamentAfiliado = $('select[name=afi_departamento_info_afiliado]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]['Id_departamento'] != SelectorDepartamentAfiliado) {
                        $('#afi_departamento_info_afiliado').append('<option value="'+data[claves[i]]["Id_departamento"]+'">'+data[claves[i]]["Nombre_departamento"]+'</option>');
                    }
                }
            }else{
                $('#afi_departamento_info_afiliado').empty();
                $('#afi_departamento_info_afiliado').append('<option value="" selected>Seleccione</option>');
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    $('#afi_departamento_info_afiliado').append('<option value="'+data[claves[i]]["Id_departamento"]+'">'+data[claves[i]]["Nombre_departamento"]+'</option>');
                }
            }
        }
    });
    // listado municipios dependiendo del departamentos (informacion afiliado)
    $('#afi_departamento_info_afiliado').change(function(){
        $('#afi_municipio_info_afiliado').prop('disabled', false);
        let id_departamento_info_afiliado_benefi = $('#afi_departamento_info_afiliado').val();
        let datos_lista_municipios_info_afiliado_benefi = {
            '_token': token,
            'parametro' : "municipios_info_afiliado",
            'id_departamento_info_afiliado': id_departamento_info_afiliado_benefi
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_lista_municipios_info_afiliado_benefi,
            success:function(data) {
                // console.log(data);
                $('#afi_municipio_info_afiliado').empty();
                $('#afi_municipio_info_afiliado').append('<option value="" selected>Seleccione</option>');
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    $('#afi_municipio_info_afiliado').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');
                }
            }
        });
    });

    // listado tipo de afiliado
    let datos_lista_tipo_afiliado = {
        '_token': token,
        'parametro' : "tipo_afiliado"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_afiliado,
        success:function(data) {
            // console.log(data);
            let tipo_afiliadoEdicion = $('select[name=tipo_afiliado]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != tipo_afiliadoEdicion) {
                    $('#tipo_afiliado').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });

    // lista eps
    let datos_lista_eps = {
        '_token': token,
        'parametro' : "lista_eps"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_eps,
        success:function(data) {
            // console.log(data);
            let epsEdicion = $('select[name=eps]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Eps"] != epsEdicion) {                    
                    $('#eps').append('<option value="'+data[claves[i]]["Id_Eps"]+'">'+data[claves[i]]["Nombre_eps"]+'</option>');
                }
            }
        }
    });

    // lista afp
    let datos_lista_afp = {
        '_token': token,
        'parametro' : "lista_afp"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_afp,
        success:function(data) {
            // console.log(data);
            let afpEdicion = $('select[name=afp]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Afp"] != afpEdicion) {                    
                    $('#afp').append('<option value="'+data[claves[i]]["Id_Afp"]+'">'+data[claves[i]]["Nombre_afp"]+'</option>');
                }
            }
        }
    });

    // lista afp conocimiento
    let datos_lista_afp_conocimiento = {
        '_token': token,
        'parametro' : "lista_afp"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_afp_conocimiento,
        success:function(data) {
            // console.log(data);
            let afpEdicion = $('select[name=afp_conocimiento]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Afp"] != afpEdicion) {                    
                    $('#afp_conocimiento').append('<option value="'+data[claves[i]]["Id_Afp"]+'">'+data[claves[i]]["Nombre_afp"]+'</option>');
                }
            }
        }
    });

    // lista entidad conocimiento
    let datos_lista_entidad_conocimiento_multiple = {
        '_token': token,
        'parametro' : "entidades_conocimiento"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_entidad_conocimiento_multiple,
        success:function(data) {
            
            $("[id^=entidad_conocimiento_]").empty();
            $("[id^=entidad_conocimiento_]").append('<option value="0">Ninguna</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $("[id^=entidad_conocimiento_]").append('<option value="'+data[claves[i]]["Id_Entidad"]+'">'+data[claves[i]]["Tipo_Entidad"]+' - '+data[claves[i]]["Nombre_entidad"]+'</option>');
            }

            $("[id^=entidad_conocimiento_]").each(function (index){
                var atributo_id =$(this).attr('id');
            
                if($("#bd_"+atributo_id).val() != 0){
                    $("#"+atributo_id).val($("#bd_"+atributo_id).val()).trigger('change');
                }
            });
        }
    });
    
    // lista arl (información afiliado)
    let datos_lista_arl_info_afiliado = {
        '_token': token,
        'parametro' : "lista_arl_info_afiliado"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_arl_info_afiliado,
        success:function(data) {
            // console.log(data);
            let arl_info_afiliadoEdicion = $('select[name=arl_info_afiliado]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Arl"] != arl_info_afiliadoEdicion) {                    
                    $('#arl_info_afiliado').append('<option value="'+data[claves[i]]["Id_Arl"]+'">'+data[claves[i]]["Nombre_arl"]+'</option>');
                }
            }
        }
    });

    // lista apoderado
    let datos_lista_arl_apoderado = {
        '_token': token,
        'parametro' : "apoderado"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_arl_apoderado,
        success:function(data) {
            // console.log(data);
            let apoderadoEdicion = $('select[name=apoderado]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Nombre_parametro"] != apoderadoEdicion) {                    
                    $('#apoderado').append('<option value="'+data[claves[i]]["Nombre_parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    // lista activo
    let datos_lista_activo = {
        '_token': token,
        'parametro' : "activo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_activo,
        success:function(data) {
            // console.log(data);
            let activoEdicion = $('select[name=activo]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Nombre_parametro"] != activoEdicion) {                    
                    $('#activo').append('<option value="'+data[claves[i]]["Nombre_parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    // lista medio notificacion afiliado
    let datos_lista_medios_notificacion = {
        '_token': token,
        'parametro' : "medios_notificacion"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_medios_notificacion,
        success:function(data) {
            // console.log(data);
            let medio_notificacionEdicion = $('select[name=medio_notificacion_afiliado]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Nombre_parametro"] != medio_notificacionEdicion) {                    
                    $('#medio_notificacion_afiliado').append('<option value="'+data[claves[i]]["Nombre_parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    //LISTADO ARL (Información Laboral)
    let datos_lista_arl = {
        '_token': token,
        'parametro' : "listado_arl_info_laboral"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_arl,
        success:function(data) {
            // console.log(data);
            let arl_info_laboralEdicion = $('select[name=arl_info_laboral]').val();
            
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Arl"] != arl_info_laboralEdicion) {        
                    $('#arl_info_laboral').append('<option value="'+data[claves[i]]["Id_Arl"]+'">'+data[claves[i]]["Nombre_arl"]+'</option>');
                }
            }
        }
    });

    //LISTADO ARL MODAL (Información Laboral)
    let datos_lista_arl_modal = {
        '_token': token,
        'parametro' : "listado_arl_info_laboral"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_arl_modal,
        success:function(data) {
            // console.log(data);
            $('#arl_info_laboral_registrar').empty();
            $('#arl_info_laboral_registrar').append('<option value="" selected>Seleccione</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $('#arl_info_laboral_registrar').append('<option value="'+data[claves[i]]["Id_Arl"]+'">'+data[claves[i]]["Nombre_arl"]+'</option>');
            }
        }
    });

    //LISTADO DEPARTAMENTO (Información Laboral)
    let datos_listado_departamento = {
        '_token': token,
        'parametro' : "listado_departamento_info_laboral"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_departamento,
        success:function(data) {
            //console.log(data);
            let departamento_info_laboralEdicion = $('select[name=departamento_info_laboral]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_departamento"] != departamento_info_laboralEdicion) {                    
                    $('#departamento_info_laboral').append('<option value="'+data[claves[i]]["Id_departamento"]+'">'+data[claves[i]]["Nombre_departamento"]+'</option>');
                }
            }
        }
    });

    //LISTADO DEPARTAMENTO MODAL (Información Laboral)
    let datos_listado_departamento_registrar = {
        '_token': token,
        'parametro' : "listado_departamento_info_laboral"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_departamento_registrar,
        success:function(data) {
            //console.log(data);
            $('#departamento_info_laboral_registrar').empty();
            $('#departamento_info_laboral_registrar').append('<option value="" selected>Seleccione</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $('#departamento_info_laboral_registrar').append('<option value="'+data[claves[i]]["Id_departamento"]+'">'+data[claves[i]]["Nombre_departamento"]+'</option>');
            }
        }
    });

    // LISTADO DE MUNICIPIOS (Información Laboral)
    if($('select[name=municipio_info_laboral]').val() != ""){
        $('#municipio_info_laboral').prop('disabled', false);
        let id_departamento_info_laboral = $('#departamento_info_laboral').val();
        let datos_municipio_info_laboral = {
            '_token': token,
            'parametro' : "municipios_info_laboral",
            'id_departamento_info_laboral': id_departamento_info_laboral
        };

        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_municipio_info_laboral,
            success:function(data) {
                //console.log(data);
                let municipio_info_laboralEdicion = $('select[name=municipio_info_laboral]').val();
                $('#municipio_info_laboral').empty();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_municipios"] != municipio_info_laboralEdicion) {
                        $('#municipio_info_laboral').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }else{
                        $('#municipio_info_laboral').append('<option value="'+data[claves[i]]["Id_municipios"]+'" selected>'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }
                }
            }
        });
    }
    $('#departamento_info_laboral').change( function(){
        $('#municipio_info_laboral').prop('disabled', false);
        let id_departamento_info_laboral = $('#departamento_info_laboral').val();
        let datos_municipio_info_laboral = {
            '_token': token,
            'parametro' : "municipios_info_laboral",
            'id_departamento_info_laboral': id_departamento_info_laboral
        };

        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_municipio_info_laboral,
            success:function(data) {
                //console.log(data);
                $('#municipio_info_laboral').empty();
                $('#municipio_info_laboral').append('<option value="">Seleccione</option>');
                let municipio_info_laboralEdicion = $('select[name=municipio_info_laboral]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_municipios"] != municipio_info_laboralEdicion) {
                        $('#municipio_info_laboral').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');                        
                    }
                }
            }
        });
    });

    // LISTADO DE MUNICIPIOS MODAL (Información Laboral)
    $('#departamento_info_laboral_registrar').change( function(){
        $('#municipio_info_laboral_registrar').prop('disabled', false);
        let id_departamento_info_laboral_reg = $('#departamento_info_laboral_registrar').val();
        let datos_municipio_info_laboral_reg = {
            '_token': token,
            'parametro' : "municipios_info_laboral",
            'id_departamento_info_laboral': id_departamento_info_laboral_reg
        };

        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_municipio_info_laboral_reg,
            success:function(data) {
                //console.log(data);
                $('#municipio_info_laboral_registrar').empty();
                $('#municipio_info_laboral_registrar').append('<option value="" selected>Seleccione</option>');
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    $('#municipio_info_laboral_registrar').append('<option value="'+data[claves[i]]["Id_municipios"]+'">'+data[claves[i]]["Nombre_municipio"]+'</option>');
                }
            }
        });
    });

    //LISTADO ACTIVIDAD ECONOMICA
    let datos_lista_actividad_economica = {
        '_token': token,
        'parametro' : "listado_actividad_economica"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_actividad_economica,
        success:function(data) {
            //console.log(data);
            let actividad_economicaEdicion = $('select[name=actividad_economica]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_ActEco"] != actividad_economicaEdicion) {                    
                    $('#actividad_economica').append('<option value="'+data[claves[i]]["Id_ActEco"]+'">'+data[claves[i]]["id_codigo"]+' - '+data[claves[i]]["Nombre_actividad"]+'</option>');
                }
            }
        }
    });

    //LISTADO ACTIVIDAD ECONOMICA modal
    let datos_lista_actividad_economica_registrar = {
        '_token': token,
        'parametro' : "listado_actividad_economica"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_actividad_economica_registrar,
        success:function(data) {
            //console.log(data);
            $('#actividad_economica_registrar').empty();
            $('#actividad_economica_registrar').append('<option value="" selected>Seleccione</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $('#actividad_economica_registrar').append('<option value="'+data[claves[i]]["Id_ActEco"]+'">'+data[claves[i]]["id_codigo"]+' - '+data[claves[i]]["Nombre_actividad"]+'</option>');
            }
        }
    });

    //LISTADO CLASE DE RIESGO
    let datos_lista_clase_de_riesgos = {
        '_token': token,
        'parametro' : "listado_clase_riesgo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_clase_de_riesgos,
        success:function(data) {
            //console.log(data);
            let clase_riesgoEdicion = $('select[name=clase_riesgo]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Riesgo"] != clase_riesgoEdicion) {                    
                    $('#clase_riesgo').append('<option value="'+data[claves[i]]["Id_Riesgo"]+'">'+data[claves[i]]["Nombre_riesgo"]+'</option>');
                }
            }
        }
    });

    //LISTADO CLASE DE RIESGO MODAL
    let datos_lista_clase_de_riesgos_registrar = {
        '_token': token,
        'parametro' : "listado_clase_riesgo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_clase_de_riesgos_registrar,
        success:function(data) {
            //console.log(data);
            $('#clase_riesgo_registrar').empty();
            $('#clase_riesgo_registrar').append('<option value="" selected>Seleccione</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $('#clase_riesgo_registrar').append('<option value="'+data[claves[i]]["Id_Riesgo"]+'">'+data[claves[i]]["Nombre_riesgo"]+'</option>');
            }
        }
    });

    //LISTADO CIUO
    let datos_lista_ciuo = {
        '_token': token,
        'parametro' : "listado_codigo_ciuo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_ciuo,
        success:function(data) {
            //console.log(data);
            let codigo_ciuoEdicion = $('select[name=codigo_ciuo]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Codigo"] != codigo_ciuoEdicion) {                    
                    $('#codigo_ciuo').append('<option value="'+data[claves[i]]["Id_Codigo"]+'">'+data[claves[i]]["id_codigo_ciuo"]+' - '+data[claves[i]]["Nombre_ciuo"]+'</option>');
                }
            }
        }
    });

    //LISTADO MEDIOS DE NOTIFICACION
    let datos_lista_medios_notificacion_laboral = {
        '_token': token,
        'parametro' : "medios_notificacion"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_medios_notificacion_laboral,
        success:function(data) {
            // console.log(data);
            let medio_notificacionEdicion = $('select[name=medio_notificacion_laboral]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Nombre_parametro"] != medio_notificacionEdicion) {                    
                    $('#medio_notificacion_laboral').append('<option value="'+data[claves[i]]["Nombre_parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    //LISTADO CIUO MODAL
    let datos_lista_ciuo_registrar = {
        '_token': token,
        'parametro' : "listado_codigo_ciuo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_ciuo_registrar,
        success:function(data) {
            //console.log(data);
            $('#codigo_ciuo_registrar').empty();
            $('#codigo_ciuo_registrar').append('<option value="" selected>Seleccione</option>');
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                $('#codigo_ciuo_registrar').append('<option value="'+data[claves[i]]["Id_Codigo"]+'">'+data[claves[i]]["id_codigo_ciuo"]+' - '+data[claves[i]]["Nombre_ciuo"]+'</option>');
            }
        }
    });

    //LISTADO MOTIVO SOLICITUD
    let datos_lista_motivo_solicitud = {
        '_token': token,
        'parametro' : "listado_motivo_solicitud"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_motivo_solicitud,
        success:function(data) {
            //console.log(data);
            let motivo_solicitudEdicion = $('select[name=motivo_solicitud]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Solicitud"] != motivo_solicitudEdicion) {                    
                    $('#motivo_solicitud').append('<option value="'+data[claves[i]]["Id_Solicitud"]+'">'+data[claves[i]]["Nombre_solicitud"]+'</option>');
                }
            }
        }
    });

    //LISTADO TIPO VINCULACION
    let datos_lista_tipo_viculacion = {
        '_token': token,
        'parametro' : "listado_tipo_vinculo"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_lista_tipo_viculacion,
        success:function(data) {
            //console.log(data);
            let tipovinculoEdicion = $('select[name=tipovinculo]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != tipovinculoEdicion) {                    
                    $('#tipovinculo').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    //LISTADO REGIMEN EN SALUD
    let datos_listado_solicitud_regimen_en_salud = {
        '_token': token,
        'parametro' : "listado_solicitud_regimen_en_salud"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_solicitud_regimen_en_salud,
        success:function(data) {
            //console.log(data);
            let regimenEdicion = $('select[name=regimen]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != regimenEdicion) {                    
                    $('#regimen').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');
                }
            }
        }
    });

    //LISTADO SOLICITANTE
    let datos_listado_solicitante = {
        '_token': token,
        'parametro' : "listado_solicitante"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_solicitante,
        success:function(data) {
            //console.log(data);
            let solicitanteEdicion = $('select[name=solicitante]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_solicitante"] != solicitanteEdicion) {                    
                    $('#solicitante').append('<option value="'+data[claves[i]]["Id_solicitante"]+'">'+data[claves[i]]["Solicitante"]+'</option>');
                }
            }
        }
    });

    // LISTADO NOMBRE SOLICITANTE
    if($('select[name=nombre_solicitante]').val() != ""){
        $('#nombre_solicitante').prop('disabled', false);
        let id_solicitante = $('#solicitante').val();
        let datos_listado_nombre_solicitante = {
            '_token': token,
            'parametro' : "nombre_solicitante",
            'id_solicitante': id_solicitante
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_listado_nombre_solicitante,
            success:function(data) {
                // console.log(data);
                let nombre_solicitanteEdicion = $('select[name=nombre_solicitante]').val();
                $('#nombre_solicitante').empty();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_Nombre_solicitante"] != nombre_solicitanteEdicion) {                        
                        $('#nombre_solicitante').append('<option value="'+data[claves[i]]["Id_Nombre_solicitante"]+'">'+data[claves[i]]["Nombre_solicitante"]+'</option>');
                    }else{
                        $('#nombre_solicitante').append('<option value="'+data[claves[i]]["Id_Nombre_solicitante"]+'" selected>'+data[claves[i]]["Nombre_solicitante"]+'</option>');
                    }
                }
            }
        });
    }
    $('#solicitante').change(function(){
        $('#nombre_solicitante').prop('disabled', false);
        let id_solicitante = $('#solicitante').val();
        let datos_listado_nombre_solicitante = {
            '_token': token,
            'parametro' : "nombre_solicitante",
            'id_solicitante': id_solicitante
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_listado_nombre_solicitante,
            success:function(data) {
                // console.log(data);
                $('#nombre_solicitante').empty();
                $('#nombre_solicitante').append('<option value="">Seleccione</option>');
                let nombre_solicitanteEdicion = $('select[name=nombre_solicitante]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_Nombre_solicitante"] != nombre_solicitanteEdicion) {                        
                        $('#nombre_solicitante').append('<option value="'+data[claves[i]]["Id_Nombre_solicitante"]+'">'+data[claves[i]]["Nombre_solicitante"]+'</option>');
                    }
                }
            }
        });
    });

   
    //LISTADO FUENTE DE INFORMACION
    let datos_listado_fuente_informacion = {
        '_token': token,
        'parametro' : "listado_fuente_informacion"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_fuente_informacion,
        success:function(data) {
            //console.log(data);
            let fuente_informacionEdicion = $('select[name=fuente_informacion]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Parametro"] != fuente_informacionEdicion) {
                    $('#fuente_informacion').append('<option value="'+data[claves[i]]["Id_Parametro"]+'">'+data[claves[i]]["Nombre_parametro"]+'</option>');                    
                }
            }
        }
    });

    //LISTADO PROCESO
    let datos_listado_proceso = {
        '_token': token,
        'parametro' : "listado_proceso"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_proceso,
        success:function(data) {
            //console.log(data);
            let procesoEdicion = $('select[name=proceso]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_proceso"] != procesoEdicion) {                    
                    $('#proceso').append('<option value="'+data[claves[i]]["Id_proceso"]+'">'+data[claves[i]]["Nombre_proceso"]+'</option>');
                }
            }
        }
    });

    // LISTADO DE SERVICIOS
    if ($('select[name=servicio]').val() != "") {
        $('#servicio').prop('disabled', false);
        let id_proceso = $('#proceso').val();
        let datos_listado_servicios = {
            '_token': token,
            'parametro' : "listado_servicios",
            'id_proceso' : id_proceso
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_listado_servicios,
            success:function(data) {
                //console.log(data);
                let servicioEdicion = $('select[name=servicio]').val();
                $('#servicio').empty();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_Servicio"] != servicioEdicion) {                        
                        $('#servicio').append('<option value="'+data[claves[i]]["Id_Servicio"]+'">'+data[claves[i]]["Nombre_servicio"]+'</option>');
                    }else{
                        $('#servicio').append('<option value="'+data[claves[i]]["Id_Servicio"]+'" selected>'+data[claves[i]]["Nombre_servicio"]+'</option>');
                    }
                }
            }
        });
    }
    $('#proceso').change(function(){
        $('#servicio').prop('disabled', false);
        let id_proceso = $('#proceso').val();
        let datos_listado_servicios = {
            '_token': token,
            'parametro' : "listado_servicios",
            'id_proceso' : id_proceso
        };
        $.ajax({
            type:'POST',
            url:'/cargarselectores',
            data: datos_listado_servicios,
            success:function(data) {
                //console.log(data);
                $('#servicio').empty();
                let servicioEdicion = $('select[name=servicio]').val();
                let claves = Object.keys(data);
                for (let i = 0; i < claves.length; i++) {
                    if (data[claves[i]]["Id_Servicio"] != servicioEdicion) {                        
                        $('#servicio').append('<option value="'+data[claves[i]]["Id_Servicio"]+'">'+data[claves[i]]["Nombre_servicio"]+'</option>');
                    }
                }
            }
        });
    });

    //LISTADO ACCION
    let datos_listado_accion = {
        '_token': token,
        'parametro' : "listado_accion"
    };
    $.ajax({
        type:'POST',
        url:'/cargarselectores',
        data: datos_listado_accion,
        success:function(data) {
            //console.log(data);
            let accionEdicion = $('select[name=accion]').val();
            let claves = Object.keys(data);
            for (let i = 0; i < claves.length; i++) {
                if (data[claves[i]]["Id_Accion"] != accionEdicion) {                    
                    $('#accion').append('<option value="'+data[claves[i]]["Id_Accion"]+'">'+data[claves[i]]["Nombre_accion"]+'</option>');
                }
            }
        }
    });

    /* VALIDACIÓN OPCIONES OTRO */

    /* Validación opción OTRO/¿Cuál? del selector Tipo de Cliente */
    $('.columna_otro_tipo_cliente').css('display','none');
    $('#tipo_cliente').change(function(){
        let opt_otro_cual_tipo_cliente = $("#tipo_cliente option:selected").text();
        if (opt_otro_cual_tipo_cliente === "OTRO/¿Cuál?") {
            $(".columna_otro_tipo_cliente").slideDown('slow');
            $('#otro_tipo_cliente').prop('required', true);
        }else{
            $(".columna_otro_tipo_cliente").slideUp('slow');
            $('#otro_tipo_cliente').prop('required', false);
        }
    });

    /* Validación opción Otro/¿Cuál? del selector Tipo de documento */
    $('#tipo_documento').change(function (){
        let opt_otro_tipo_documento = $("#tipo_documento option:selected").text();
        if (opt_otro_tipo_documento === "Otro/¿Cuál?") {
            $(".otro_documento").removeClass('d-none');
            $(".otro_documento").slideDown('slow');
            // $('#otro_nombre_documento').prop('required', true);
        } else {
            $(".otro_documento").slideUp('slow');
            // $('#otro_nombre_documento').prop('required', false);
        }
    });

    /* Validación opción Otro/¿Cual? del selector de Estado Civil */
    $('#estado_civil').change(function(){
        let opt_otro_estado_civil = $("#estado_civil option:selected").text();
        if (opt_otro_estado_civil === "Otro/¿Cual?") {
            $(".columna_otro_estado_civil").removeClass('d-none');
            $(".columna_otro_estado_civil").slideDown('slow');
            // $('#otro_estado_civil').prop('required', true);
        } else {
            $(".columna_otro_estado_civil").slideUp('slow');
            // $('#otro_estado_civil').prop('required', false);
        }
    });

    /* Validación opción Otro/¿Cual? del selector Nivel de Escolar */
    $('#nivel_escolar').change(function(){
        let opt_otro_nivel_escolar = $('#nivel_escolar option:selected').text();
        if (opt_otro_nivel_escolar === "Otro/¿Cual?") {
            $(".columna_otro_nivel_escolar").removeClass('d-none');
            $(".columna_otro_nivel_escolar").slideDown('slow');
            // $('#otro_nivel_escolar').prop('required', true);
        } else {
            $(".columna_otro_nivel_escolar").slideUp('slow');
            // $('#otro_nivel_escolar').prop('required', false);
        }
    });

    /* Validación opción Exterior del selector Departamento (Información Afiliado) */
    $('#departamento_info_afiliado').change(function(){
        let opt_exterior_info_afiliado = $('#departamento_info_afiliado option:selected').text();
        if (opt_exterior_info_afiliado != "Exterior") {
            $(".columna_pais_exterior_info_afiliado").addClass('d-none');
            $(".columna_pais_exterior_info_afiliado").slideUp('slow');
            // $('#pais_exterior_info_afiliado').prop('required', true);
        }
    });

    /* Validación opción Exterior del selector Departamento (Información Afiliado / Beneficiario) */
    $('#afi_departamento_info_afiliado').change(function(){
        let opt_exterior_info_afiliado_benefi = $('#afi_departamento_info_afiliado option:selected').text();
        if (opt_exterior_info_afiliado_benefi != "Exterior") {
            $(".afi_columna_pais_exterior_info_afiliado").addClass('d-none');
            $(".afi_columna_pais_exterior_info_afiliado").slideUp('slow');
            // $('#pais_exterior_info_afiliado').prop('required', true);
        }
    });

    /* Validación opción País? del selector Municipio (Información Afiliado) */
    $('#municipio_info_afiliado').change(function(){
        let opt_exterior_info_afiliado = $('#municipio_info_afiliado option:selected').text();
        if (opt_exterior_info_afiliado === "País?") {
            $(".columna_pais_exterior_info_afiliado").removeClass('d-none');
            $(".columna_pais_exterior_info_afiliado").slideDown('slow');
            // $('#pais_exterior_info_afiliado').prop('required', true);
        } else {
            $(".columna_pais_exterior_info_afiliado").slideUp('slow');
            // $('#otro_nivel_escolar').prop('required', false);
        }
    });

    /* Validación opción País? del selector Municipio (Información Afiliado) */
    $('#afi_municipio_info_afiliado').change(function(){
        let opt_exterior_info_afiliado_benefi = $('#afi_municipio_info_afiliado option:selected').text();
        if (opt_exterior_info_afiliado_benefi === "País?") {
            $(".afi_columna_pais_exterior_info_afiliado").removeClass('d-none');
            $(".afi_columna_pais_exterior_info_afiliado").slideDown('slow');
            // $('#pais_exterior_info_afiliado').prop('required', true);
        } else {
            $(".afi_columna_pais_exterior_info_afiliado").slideUp('slow');
            // $('#otro_nivel_escolar').prop('required', false);
        }
    });

    /* VALIDACIÓN Información laboral */
    var tipo_laboral = $("input[name='t_laboral']").val();
    // console.log(tipo_laboral);
    if (tipo_laboral == "Empleado actual") {
        // Set the 'required' attribute to true for specific elements
        document.getElementById('empresa').required = true;
        document.getElementById('medio_notificacion_laboral').required = true;
        document.getElementById('nit_cc').required = false;
    
        // Update the visibility of certain elements using the 'd-none' class
        $(".no_nom_empresa").addClass('d-none');
        $(".si_nom_empresa").removeClass('d-none');
        $(".no_medio_noti").addClass('d-none');
        $(".si_medio_noti").removeClass('d-none');
    } else {
        // Set the 'required' attribute to false for specific elements
        document.getElementById('empresa').required = false;
        document.getElementById('nit_cc').required = false;
        document.getElementById('medio_notificacion_laboral').required = false;
    
        // Update the visibility of certain elements using the 'd-none' class
        $(".si_nom_empresa").addClass('d-none');
        $(".no_nom_empresa").removeClass('d-none');
        $(".si_medio_noti").addClass('d-none');
        $(".no_medio_noti").removeClass('d-none');
    }
    /* VALIDACIÓN Afiliado / Beneficiario */
    var id_tipo_afiliado = $('#tipo_afiliado').val();

    if (id_tipo_afiliado == 27) {
        $(".nom_afiliado").addClass('d-none');
        $(".nom_beneficiario").removeClass('d-none');
        $(".columna_identificacion_afi_beni").removeClass('d-none');
        $(".columna_tipo_documen_afi_beni").removeClass('d-none');
        $(".columna_nombre_afi_beni").removeClass('d-none');
        $(".columna_direccion_afi_beni").removeClass('d-none');
        $(".columna_depar_afi_beni").removeClass('d-none');
        $(".afi_columna_municipio_info_afiliado").removeClass('d-none');
    }else{
        $(".columna_otro_tipo_afiliado").slideUp('slow');
        $(".nom_beneficiario").addClass('d-none');
        $(".nom_beneficiario").addClass('d-none');
        $(".columna_identificacion_afi_beni").addClass('d-none');
        $(".columna_tipo_documen_afi_beni").addClass('d-none');
        $(".columna_nombre_afi_beni").addClass('d-none');
        $(".columna_direccion_afi_beni").addClass('d-none');
        $(".columna_depar_afi_beni").addClass('d-none');
        $(".afi_columna_municipio_info_afiliado").addClass('d-none');
        $(".nom_afiliado").removeClass('d-none');
    }
    /* Validación opción Otro/¿Cuál? del selector Tipo de afiliado */
    $('#tipo_afiliado').change(function(){
        let opt_otro_afiliado = $('#tipo_afiliado option:selected').text();
        if (opt_otro_afiliado === "Otro/¿Cuál?") {
            $(".columna_otro_tipo_afiliado").removeClass('d-none');
            $(".columna_otro_tipo_afiliado").slideDown('slow');
            $(".nom_beneficiario").addClass('d-none');
            $(".columna_identificacion_afi_beni").addClass('d-none');
            $(".columna_tipo_documen_afi_beni").addClass('d-none');
            $(".columna_nombre_afi_beni").addClass('d-none');
            $(".columna_direccion_afi_beni").addClass('d-none');
            $(".columna_depar_afi_beni").addClass('d-none');
            $(".afi_columna_municipio_info_afiliado").addClass('d-none');
            $(".nom_afiliado").removeClass('d-none');
            // $('#otro_tipo_afiliado').prop('required', true);
        } else if (opt_otro_afiliado === "Beneficiario") { 
            $(".nom_afiliado").addClass('d-none');
            $(".nom_beneficiario").removeClass('d-none');
            $(".columna_identificacion_afi_beni").removeClass('d-none');
            $(".columna_tipo_documen_afi_beni").removeClass('d-none');
            $(".columna_nombre_afi_beni").removeClass('d-none');
            $(".columna_direccion_afi_beni").removeClass('d-none');
            $(".columna_depar_afi_beni").removeClass('d-none');
            $(".afi_columna_municipio_info_afiliado").removeClass('d-none');
        } else {
            $(".columna_otro_tipo_afiliado").slideUp('slow');
            $(".nom_beneficiario").addClass('d-none');
            $(".nom_beneficiario").addClass('d-none');
            $(".columna_identificacion_afi_beni").addClass('d-none');
            $(".columna_tipo_documen_afi_beni").addClass('d-none');
            $(".columna_nombre_afi_beni").addClass('d-none');
            $(".columna_direccion_afi_beni").addClass('d-none');
            $(".columna_depar_afi_beni").addClass('d-none');
            $(".afi_columna_municipio_info_afiliado").addClass('d-none');
            $(".nom_afiliado").removeClass('d-none');
            // $('#otro_nivel_escolar').prop('required', false);
        }
    });

    /* Validación opción Otro/¿Cual? del selector EPS */
    $('#eps').change(function(){
        let opt_otra_eps = $('#eps option:selected').text();
        if (opt_otra_eps === "Otro/¿Cual?") {
            $(".columna_otro_eps").removeClass('d-none');
            $(".columna_otro_eps").slideDown('slow');
            // $('#otra_eps').prop('required', true);
        } else {
            $(".columna_otro_eps").slideUp('slow');
            // $('#otra_eps').prop('required', false);
        }
    });

    /* Validación opción Si del selector Apoderado */
    $('#apoderado').change(function(){
        let opt_apoderado = $('#apoderado').val();
        if (opt_apoderado === "Si") {
            $(".columna_nombre_apoderado").removeClass('d-none');
            $(".columna_nombre_apoderado").slideDown('slow');
            // $('#nombre_apoderado').prop('required', true);
            $(".columna_identificacion_apoderado").removeClass('d-none');
            $(".columna_identificacion_apoderado").slideDown('slow');
            // $('#nro_identificacion_apoderado').prop('required', true);

        } else {
            $(".columna_nombre_apoderado").slideUp('slow');
            // $('#nombre_apoderado').prop('required', true);
            $(".columna_identificacion_apoderado").slideUp('slow');
            // $('#nro_identificacion_apoderado').prop('required', true);
        }
    });
  

    /* Validación opción OTRO/¿Cuál? del selector Tipo AFP  */
    $('#afp').change(function (){
        let opt_otro_afp = $("#afp option:selected").text();
        if (opt_otro_afp === "Otro/¿Cual?") {
            $(".columna_otro_afp").removeClass('d-none');
            $(".columna_otro_afp").slideDown('slow');
        } else {
            $(".columna_otro_afp").slideUp('slow');
        }
    });

    // Validación marcacion checkbox entidad de conocimiento AFP 
    $('#entidad_conocimiento').change(function (){
        if ($(this).prop('checked')) {
            $("div[class^='entidad_conocimiento_']").removeClass('d-none');
            $("[id^='alerta_entidad_conocimiento_']").addClass('d-none');
        }else{
            $("div[class^='entidad_conocimiento_']").addClass('d-none');
            $("[id^=entidad_conocimiento_]").val('0').trigger('change');
            $("[id^='alerta_entidad_conocimiento_']").addClass('d-none');
        }       
    });

    var entidad_conocimiento = $('#entidad_conocimiento');
    if (entidad_conocimiento.is(":checked")) {
        $("div[class^='entidad_conocimiento_']").removeClass('d-none');
    }else{
        $("div[class^='entidad_conocimiento_']").addClass('d-none');
        $("[id^=entidad_conocimiento_]").val('').trigger('change');
    }

    /* Funcionalidad para no permitir que se seleccione una misma entidad en alguno de los 8 selectores de entidades */
    var array_id_entidades_selccionadas = [];
    $("[id^=entidad_conocimiento_]").change(function () {
        var id_selector_entidad = $(this).attr('id');
        var $select = $("#" + id_selector_entidad);
    
        // Captura del id de la entidad seleccionada
        var valor_seleccionado_entidad = $select.val();
    
        // Si la entidad ya está seleccionada en otro selector se elimina la opcion seleccionada y arroja una alerta.
        if (array_id_entidades_selccionadas.includes(valor_seleccionado_entidad)) {
            $("#alerta_" + id_selector_entidad).removeClass('d-none');
    
            $select.val('0').trigger("change.select2");
            
        } else {
            array_id_entidades_selccionadas.push(valor_seleccionado_entidad);
            $("#alerta_" + id_selector_entidad).addClass('d-none');
        }
    });

    /* Validación opción OTRO/¿Cuál? del selector Tipo ARL (Información Afiliado) */
    $('#arl_info_afiliado').change(function(){
        let opt_otro_arl_info_afiliado = $('#arl_info_afiliado option:selected').text();
        if (opt_otro_arl_info_afiliado === "Otro/¿Cual?") {
            $(".columna_otro_arl_info_afiliado").removeClass('d-none');
            $(".columna_otro_arl_info_afiliado").slideDown('slow');
        } else {
            $(".columna_otro_arl_info_afiliado").slideUp('slow');
        }
    });

    /* Validación opción OTRO/¿Cuál? del selector Tipo ARL (Información Laboral) */
    $('#arl_info_laboral').change(function (){
        let opt_otro_arl_info_laboral = $("#arl_info_laboral option:selected").text();
        if (opt_otro_arl_info_laboral === "Otro/¿Cual?") {
            $(".otro_arl_info_laboral").removeClass('d-none');
            $(".otro_arl_info_laboral").slideDown('slow');
        } else {
            $(".otro_arl_info_laboral").slideUp('slow');
        }
    });

    /* Validación opción OTRO/¿Cuál? del selector Tipo ARL MODAL (Información Laboral) */
    $('#arl_info_laboral_registrar').change(function (){
        let opt_otro_arl_info_laboral_reg = $("#arl_info_laboral_registrar option:selected").text();
        if (opt_otro_arl_info_laboral_reg === "Otro/¿Cual?") {
            $(".otro_arl_info_laboral_registrar").removeClass('d-none');
            $(".otro_arl_info_laboral_registrar").slideDown('slow');
        } else {
            $(".otro_arl_info_laboral_registrar").slideUp('slow');
        }
    });

    /* Validación opción OTRO/¿Cuál? del selector Departamentos (Información Laboral) */
    $('#departamento_info_laboral').change(function (){
        let opt_otro_departamento_exterior = $("#departamento_info_laboral option:selected").text();
        if (opt_otro_departamento_exterior != "Exterior") {
            $(".columna_pais_exterior_info_laboral").addClass('d-none');
            $(".columna_pais_exterior_info_laboral").slideUp('slow');            
        }
    });

     /* Validación opción País? del selector Municipios (Información Laboral) */
     $('#municipio_info_laboral').change(function (){
        let opt_otro_departamento_exterior = $("#municipio_info_laboral option:selected").text();
        if (opt_otro_departamento_exterior === "País?") {
            $(".columna_pais_exterior_info_laboral").removeClass('d-none');
            $(".columna_pais_exterior_info_laboral").slideDown('slow');            
        } else {
            $(".columna_pais_exterior_info_laboral").slideUp('slow');

        }
    });

    /* Validación opción Exterior del selector Departamentos MODAL (Información Laboral) */
    $('#departamento_info_laboral_registrar').change(function (){
        let opt_otro_departamento_exterior_reg = $("#departamento_info_laboral_registrar option:selected").text();
        if (opt_otro_departamento_exterior_reg != "Exterior") {
            $(".columna_pais_exterior_info_laboral_registrar").addClass('d-none');
            $(".columna_pais_exterior_info_laboral_registrar").slideUp('slow');            
        }
    });

     /* Validación opción País? del selector Municipios MODAL (Información Laboral) */
     $('#municipio_info_laboral_registrar').change(function (){
        let opt_otro_departamento_exterior_reg = $("#municipio_info_laboral_registrar option:selected").text();
        if (opt_otro_departamento_exterior_reg === "País?") {
            $(".columna_pais_exterior_info_laboral_registrar").removeClass('d-none');
            $(".columna_pais_exterior_info_laboral_registrar").slideDown('slow');            
        } else {
            $(".columna_pais_exterior_info_laboral_registrar").slideUp('slow');

        }
    });

    var id_solicitante_pericial = $('#solicitante').val();

    if (id_solicitante_pericial == 4 || id_solicitante_pericial == 6 || id_solicitante_pericial == 7) {
        $(".columna_otro_solicitante").removeClass('d-none');
        $(".columna_otro_solicitante").slideDown('slow');  
        $(".columna_nombre_solicitante").slideUp('slow');
        $(".columna_otro_nombre_solicitante").slideUp('slow'); 
    }

    /* Validación opción OTRO/¿Cuál? del selector Solicitante  */
    $('#solicitante').change(function (){
        let opt_otro_solicitante = $("#solicitante option:selected").text();

        // si la opcion es rama judicial muestra el input vacío Nombre solicitante y al selector se le quita el required
        // si la opcion es Afiliado o Pensionado muestra el input Nombre solicitante con el nombre del afiliado y al selector se le quita el required
        // Si la opcion es Arl o Afp Eps muestra el selector Nombre solicitante y se le adiciond el required
        if (opt_otro_solicitante === "Rama Judicial") {
            $(".columna_otro_solicitante").removeClass('d-none');
            $(".columna_otro_solicitante").slideDown('slow');
            $(".otro_solicitante").val('');   
            $(".columna_nombre_solicitante").slideUp('slow');
            // $(".columna_otro_nombre_solicitante").slideUp('slow');
            $("#nombre_solicitante").prop('required', false);
        } else if (opt_otro_solicitante === "Afiliado" || opt_otro_solicitante === "Pensionado") {
            let nombre_afiliado_solicitante = $("#nombre_afiliado").val();
            $(".columna_otro_solicitante").removeClass('d-none');
            $(".columna_otro_solicitante").slideDown('slow');
            $(".otro_solicitante").val(nombre_afiliado_solicitante); 
            $(".columna_nombre_solicitante").slideUp('slow');
            // $(".columna_otro_nombre_solicitante").slideUp('slow');
            $("#nombre_solicitante").prop('required', false);
        }        
        else {
            $(".columna_otro_solicitante").slideUp('slow');
            $(".columna_nombre_solicitante").slideDown('slow');
            $("#nombre_solicitante").prop('required', true);
        }
    });

    /* Validación opción OTRO/¿Cuál? del selector Nombre Solicitante  */
    // $('#nombre_solicitante').change(function (){
    //     let opt_otro_nombre_solicitante = $("#nombre_solicitante option:selected").text();
    //     if (opt_otro_nombre_solicitante === "Otro/¿Cual?") {
    //         $(".columna_otro_nombre_solicitante").removeClass('d-none');
    //         $(".columna_otro_nombre_solicitante").slideDown('slow');
    //     } else {
    //         $(".columna_otro_nombre_solicitante").slideUp('slow');
    //     }
    // });

    /* Validación opción OTRO/¿Cuál? del selector Fuente de informacion  */
    $('#fuente_informacion').change(function (){
        let opt_otro_fuente_informacion = $("#fuente_informacion option:selected").text();
        if (opt_otro_fuente_informacion === "Otro/¿Cual?") {
            $(".columna_otra_fuente_informacion").removeClass('d-none');
            $(".columna_otra_fuente_informacion").slideDown('slow');
        } else {
            $(".columna_otra_fuente_informacion").slideUp('slow');
        }
    });


    /* GUARDAR OTRA EMPRESA */
    $('#guardar_otra_empresa').click(function(e){
        $('.no_creada_empresa').empty();
        e.preventDefault();

        
        /* Validación de los radio button */
        var sumatoria_entradas_empleo = $('#empleo_actual_registrar:checked').length + $('#independiente_registrar:checked').length + $('#beneficiario_registrar:checked').length

        if (sumatoria_entradas_empleo === 0) {
            // $('.no_creada_empresa').removeClass('d-none');
            $('.no_creada_empresa').append('<strong>Debe seleccionar un tipo de empleo.</strong>; ');
        }

        /* Validación Input Empresa */
        if ($('#empresa_registrar').val() === "") {
            // $('.no_creada_empresa').removeClass('d-none');
            $('.no_creada_empresa').append('<strong>El campo Empresa es obligatorio.</strong>; ');
        }else{
            var confirmacion_empresa = 1;
        }

        /* Validación Input NIT / CC */
        if ($('#nit_cc_registrar').val() === "") {
            // $('.no_creada_empresa').removeClass('d-none');
            $('.no_creada_empresa').append('<strong>El campo NIT/CC es obligatorio.</strong>');
        }else{
            var confirmacion_nit_cc = 1;
        }

        if (sumatoria_entradas_empleo == 1 && confirmacion_empresa == 1 && confirmacion_nit_cc == 1) {
            $('.no_creada_empresa').addClass('d-none');
            $('.no_creada_empresa').empty();

            let datos_registrar_empresa = {
                '_token': $("input[name='_token']").val(),
                'nro_identificacion_registrar': $('#nro_identificacion').val(),
                'tipo_empleo_registrar': $("input[name='tipo_empleo_registrar']:checked ").val(),
                'arl_info_laboral_registrar': $('#arl_info_laboral_registrar').val(),
                'otra_arl_info_laboral_registrar': $('#otra_arl_info_laboral_registrar').val(),
                'empresa_registrar': $('#empresa_registrar').val(),
                'nit_cc_registrar': $('#nit_cc_registrar').val(),
                'telefono_empresa_registrar': $('#telefono_empresa_registrar').val(),
                'email_info_laboral_registrar': $('#email_info_laboral_registrar').val(),
                'direccion_info_laboral_registrar': $('#direccion_info_laboral_registrar').val(),
                'departamento_info_laboral_registrar': $('#departamento_info_laboral_registrar').val(),
                'municipio_info_laboral_registrar': $('#municipio_info_laboral_registrar').val(),
                'pais_exterior_info_laboral_registrar': $('#pais_exterior_info_laboral_registrar').val(),
                'actividad_economica_registrar': $('#actividad_economica_registrar').val(),
                'clase_riesgo_registrar': $('#clase_riesgo_registrar').val(),
                'persona_contacto_registrar': $('#persona_contacto_registrar').val(),
                'telefono_persona_contacto_registrar': $('#telefono_persona_contacto_registrar').val(),
                'codigo_ciuo_registrar': $('#codigo_ciuo_registrar').val(),
                'fecha_ingreso_registrar': $('#fecha_ingreso_registrar').val(),
                'cargo_registrar': $('#cargo_registrar').val(),
                'funciones_cargo_registrar': $('#funciones_cargo_registrar').val(),
                'antiguedad_empresa_registrar': $('#antiguedad_empresa_registrar').val(),
                'antiguedad_cargo_registrar': $('#antiguedad_cargo_registrar').val(),
                'fecha_retiro_registrar': $('#fecha_retiro_registrar').val(),
                'descripcion_registrar': $('#descripcion_registrar').val()
            };
            
            // console.log(datos_registrar_empresa);
            
            $.ajax({
                type:'POST',
                url:'/registrarOtraEmpresa',
                data: datos_registrar_empresa,
                success:function(data) {
                    if (data.a == "si_creo") {
                        $('.creada_empresa').removeClass('d-none');
                        $('.creada_empresa').append('<strong>'+data.b+'</strong>');
                        setTimeout(function(){
                            $('.creada_empresa').addClass('d-none');
                            $('.creada_empresa').empty();

                            $('#empleo_actual_registrar').prop('checked', false);
                            $('#independiente_registrar').prop('checked', false);
                            $('#beneficiario_registrar').prop('checked', false);
                            $('#arl_info_laboral_registrar').val('').change();
                            $('#otra_arl_info_laboral_registrar').val('');
                            $('#empresa_registrar').val('');
                            $('#nit_cc_registrar').val('');
                            $('#telefono_empresa_registrar').val('');
                            $('#email_info_laboral_registrar').val('');
                            $('#direccion_info_laboral_registrar').val('');
                            $('#departamento_info_laboral_registrar').val('').change();
                            $('#municipio_info_laboral_registrar').val('').change();
                            $('#pais_exterior_info_laboral_registrar').val('');
                            $('#actividad_economica_registrar').val('').change();
                            $('#clase_riesgo_registrar').val('').change();
                            $('#persona_contacto_registrar').val('');
                            $('#telefono_persona_contacto_registrar').val('');
                            $('#codigo_ciuo_registrar').val('').change();
                            $('#fecha_ingreso_registrar').val('');
                            $('#cargo_registrar').val('');
                            $('#funciones_cargo_registrar').val('');
                            $('#antiguedad_empresa_registrar').val('');
                            $('#antiguedad_cargo_registrar').val('');
                            $('#fecha_retiro_registrar').val('');
                            $('#descripcion_registrar').val('');
                        }, 3000);
                    }
                }
            });
        }
        else{
            $('.no_creada_empresa').removeClass('d-none');
        }
    })

    //Se crea el resumable usando Resumable.js, el cual tiene como fin crear los chunks y enviarlos al endpoint('target') especificado 
    let resumable = new Resumable({
        target: '/upload',
        query:{_token:$("input[name='_token']").val()},
        maxFiles: 1,
        fileType: ['pdf','xls','xlsx','doc','docx','jpeg','png','zip'],
        testChunks: false,
        headers: {
            'Accept' : 'application/json'
        },
    });
    /* Obtener el ID del evento a dar clic en cualquier botón de cargue de archivo y asignarlo al input hidden del id evento */
    $("input[id^='listadodocumento_']").click(function(){
        let idobtenido = $('#id_evento').val();
        let idDoc = $(this).data('id_doc');
        $("input[id^='EventoID_']").val(idobtenido);
        if(idDoc === 4){
            //Tomamos el input seleccionado
            let inputFile = $(`#listadodocumento_${idDoc}`)
            //Le asignamos el metodo de entrada de archivo el cual viene de nuestro input
            resumable.assignBrowse(inputFile[0]);
            //Esta función detecta cuando un archivo fue cargado
            resumable.on('fileAdded', function (file) {
                $(`#fileName_${idDoc}`).text(file.fileName);
                resumable.opts.query.EventoID = idobtenido;
                resumable.opts.query.Id_Documento = idDoc;
                resumable.opts.query.Nombre_documento = $(`#Nombre_documento_${idDoc}`).val().replace(/ /g, "_");
                resumable.opts.query.Id_servicio = $(`#Id_servicio_${idDoc}`).val();
            });
        }
    });
    //Mostrar modal de progressBar cargue de documentos
    function showProgress() {
        let progress = $('.progress');
        $('#modalProgressBar').show();
        progress.find('.progress-bar').css('width', '0%');
        progress.find('.progress-bar').html('0%');
        progress.find('.progress-bar').removeClass('bg-success');
        progress.show();
    }

    //Actualización progressBar cargue de documentos
    function updateProgress(value) {
        let progress = $('.progress');
        progress.find('.progress-bar').css('width', `${value}%`)
        progress.find('.progress-bar').html(`${value}%`)
    }

    //Errores al cargar un documento en Historia clinica completa
    let errorCargueDocumentosID4 = (error,time=2000) => {
        if ($('.mostrar_fallo').hasClass('d-none')) {
            $('.mostrar_fallo').removeClass('d-none');
            $('.mostrar_fallo').append(`<strong>${error}</strong>`);
            setTimeout(function(){
                $('.mostrar_fallo').addClass('d-none');
                $('.mostrar_fallo').empty();
            }, time);
        }
    }

    /* Envío de Información del Documento a Cargar */
    $("form[id^='formulario_documento_']").submit(function(e){

        e.preventDefault();
        var formData = new FormData($(this)[0]);
        var cambio_estado = $(this).parents()[1]['children'][2]["id"];
        var input_documento = $(this).parents()[0]['children'][0][4]["id"];
        var id_doc = $(this).data("id_doc");

        /* for (var pair of formData.entries()) {
            console.log(pair[0]+ ', ' + pair[1]); 
        } */
        if(id_doc === 4){
            //Validación de posibles errores antes de enviar el documento
            if(resumable.opts.query.EventoID === ""){
                errorCargueDocumentosID4('Debe diligenciar primero el formulario para poder cargar este documento.')
            }
            if(resumable.opts.query.Id_servicio === ""){
                errorCargueDocumentosID4('Debe seleccionar un servicio para poder cargar este documento.')
            }
            let file = resumable.files;
            if(resumable.files.length > 0){
                if(file[0].size > 1000000000){
                    return errorCargueDocumentosID4('El tamaño máximo permitido para cargar en este documento es de 1Gb.');
                }
                showProgress();
                resumable.upload();
            }
            else{
                errorCargueDocumentosID4('Debe cargar este documento para poder guardarlo.');
            }

            resumable.on('fileProgress', function (file) { // trigger when file progress update
                updateProgress(Math.floor(file.progress() * 100));
            });

            resumable.on('fileSuccess', function (file, response) { // trigger when file upload complete
                response = JSON.parse(response)
                if (response.parametro == "exito") {
                    $("#fecha_cargue_documento_"+id_reg_doc+"_"+id_doc).val(fechaActual);
                    $("#"+cambio_estado).empty();
                    $("#"+cambio_estado).append('<strong class="text-success">Cargado</strong>');
                    $('.mostrar_exito').removeClass('d-none');
                    $('.mostrar_exito').append('<strong>'+response.mensaje+'</strong>');
                    setTimeout(function(){
                        $('.mostrar_exito').addClass('d-none');
                        $('.mostrar_exito').empty();
                    }, 6000);
                }
                setTimeout(() => {
                    $('#modalProgressBar').hide();
                }, 500);
            });

            resumable.on('fileError', function (file, response) { // trigger when there is any error
                alert('file uploading error.')
            });
        }
        else{
        // Enviamos los datos para validar y guardar el docmuento correspondiente
            $.ajax({
                url: "/cargarDocumentos",
                type: "post",
                dataType: "json",
                data: formData,
                cache: false,
                contentType: false,
                processData: false  ,
                success:function(response){
                    // console.log(response);
                    if (response.parametro == "fallo") {
                        if (response.otro != undefined) {
                            $('#listadodocumento_'+response.otro).val('');
                        }else{
                            $('#'+input_documento).val('');
                        }
                        $('.mostrar_fallo').removeClass('d-none');
                        $('.mostrar_fallo').append('<strong>'+response.mensaje+'</strong>');
                        setTimeout(function(){
                            $('.mostrar_fallo').addClass('d-none');
                            $('.mostrar_fallo').empty();
                        }, 6000);
                    }else if (response.parametro == "exito") {
                        if(response.otro != undefined){
                            $("#estadoDocumentoOtro_"+response.otro).empty();
                            $("#estadoDocumentoOtro_"+response.otro).append('<strong class="text-success">Cargado</strong>');
                            $('#listadodocumento_'+response.otro).prop("disabled", true);
                            $('#CargarDocumento_'+response.otro).prop("disabled", true);
                            $('#habilitar_modal_otro_doc').prop("disabled", true);
                        }else{
                            $("#"+cambio_estado).empty();
                            $("#"+cambio_estado).append('<strong class="text-success">Cargado</strong>');
                        }
                        $('.mostrar_exito').removeClass('d-none');
                        $('.mostrar_exito').append('<strong>'+response.mensaje+'</strong>');
                        setTimeout(function(){
                            $('.mostrar_exito').addClass('d-none');
                            $('.mostrar_exito').empty();
                        }, 6000);
                    }else{}
                    
                }         
            });
        }
    });

    /* CALCULAR EDAD ACORDE A LA FECHA DE NACIMIENTO */
    $('#fecha_nacimiento').change(function(){
       // Obtener la fecha de nacimiento desde el input
       var fecha_nacimiento = new Date($(this).val());

       // Obtener el año, mes y día de la fecha de nacimiento
       var anio_nacimiento = fecha_nacimiento.getFullYear();
       var mes_nacimiento = fecha_nacimiento.getMonth();
       var dia_nacimiento = fecha_nacimiento.getDate();

       // Obtener la fecha actual
       var fecha_actual = new Date();
       var anio_actual = fecha_actual.getFullYear();
       var mes_actual = fecha_actual.getMonth();
       var dia_actual = fecha_actual.getDate();

       // Calcular la edad
       var edad_calculada = anio_actual - anio_nacimiento;

       // Verificar si el cumpleaños ya pasó este año
       if (mes_actual < mes_nacimiento || (mes_actual === mes_nacimiento && dia_actual < dia_nacimiento)) {
           edad_calculada--;
       }

       if (edad_calculada > 0 && !isNaN(edad_calculada)) {
           $('#edad').val(edad_calculada);
       }
    });

    /* VALIDACIÓN MOSTRAR CAMPOS LABORAL EDICION */ 
    $("#empleo_actual").change(function(){
        let opt_tipoempleo = $('#empleo_actual').val();
        if (opt_tipoempleo === "Empleado actual"){                    
            $(".columna_row1_laboral").slideDown('slow');
            $(".columna_row2_laboral").slideDown('slow');
            $(".columna_row3_laboral").slideDown('slow');
            $(".columna_row4_laboral").slideDown('slow');
            $(".columna_row5_laboral").slideDown('slow');
            
            /* Le adicionamos la propiedad required a los siguientes campos */
            $('#empresa').prop('required',true);
            $('#nit_cc').prop('required',true);
            $('#telefono_empresa').prop('required',true);
            $('#email_info_laboral').prop('required',true);
            $('#direccion_info_laboral').prop('required',true);
            $('#departamento_info_laboral').prop('required',true);
            $('#municipio_info_laboral').prop('required',true);
            $('#medio_notificacion_laboral').prop('required',true);

            /* Mostrarmos el span de obligatoriedad */
            $(".si_nom_empresa").parent().find('span').removeClass('d-none');
            $(".si_nom_nitcc").parent().find('span').removeClass('d-none');
            $(".si_nom_tel_empresa").parent().find('span').removeClass('d-none');
            $(".si_nom_email").parent().find('span').removeClass('d-none');
            $(".si_nom_direccion").parent().find('span').removeClass('d-none');
            $(".si_nom_departamento").removeClass('d-none');
            $(".no_nom_departamento").addClass('d-none');
            $(".si_nom_ciudad").removeClass('d-none');
            $(".no_nom_ciudad").addClass('d-none');
          
            $(".no_medio_noti").addClass('d-none');
            $(".si_medio_noti").removeClass('d-none');
        }
    }); 

    $("#independiente").change(function(){
        let opt_tipoempleo = $('#independiente').val();
        if (opt_tipoempleo === "Independiente"){                           
            $(".columna_row1_laboral").slideDown('slow');
            $(".columna_row2_laboral").slideDown('slow');
            $(".columna_row3_laboral").slideDown('slow');
            $(".columna_row4_laboral").slideDown('slow');
            $(".columna_row5_laboral").slideDown('slow');
            
            /* Le quitamos la propiedad required a los siguientes campos */
            $('#empresa').prop('required',false);
            $('#nit_cc').prop('required',false);
            $('#telefono_empresa').prop('required',false);
            $('#email_info_laboral').prop('required',false);
            $('#direccion_info_laboral').prop('required',false);
            $('#departamento_info_laboral').prop('required',false);
            $('#municipio_info_laboral').prop('required',false);
            $('#medio_notificacion_laboral').prop('required',false);

            /* Quitamos el span de obligatoriedad */
            $(".si_nom_empresa").parent().find('span').addClass('d-none');
            $(".si_nom_nitcc").parent().find('span').addClass('d-none');
            $(".si_nom_tel_empresa").parent().find('span').addClass('d-none');
            $(".si_nom_email").parent().find('span').addClass('d-none');
            $(".si_nom_direccion").parent().find('span').addClass('d-none');

        }
    });

    $("#beneficiario").change(function(){
        let opt_tipoempleo = $('#beneficiario').val();
        if (opt_tipoempleo === "Beneficiario"){                           
            $(".columna_row1_laboral").slideUp('slow');
            $(".columna_row2_laboral").slideUp('slow');
            $(".columna_row3_laboral").slideUp('slow');
            $(".columna_row4_laboral").slideUp('slow');
            $(".columna_row5_laboral").slideUp('slow');
            
            /* Le quitamos la propiedad required a los siguientes campos */
            $('#empresa').prop('required',false);
            $('#nit_cc').prop('required',false);
            $('#telefono_empresa').prop('required',false);
            $('#email_info_laboral').prop('required',false);
            $('#direccion_info_laboral').prop('required',false);
            $('#departamento_info_laboral').prop('required',false);
            $('#municipio_info_laboral').prop('required',false);
            $('#medio_notificacion_laboral').prop('required',false);

            /* Quitamos el span de obligatoriedad */
            $(".si_nom_empresa").parent().find('span').addClass('d-none');
            $(".si_nom_nitcc").parent().find('span').addClass('d-none');
            $(".si_nom_tel_empresa").parent().find('span').addClass('d-none');
            $(".si_nom_email").parent().find('span').addClass('d-none');
            $(".si_nom_direccion").parent().find('span').addClass('d-none');


            /* Seteamos a vacío los campos del formulario */
            $('#arl_info_laboral').append('<option value="" selected>Seleccione</option>');
            $('#empresa').val('');
            $('#nit_cc').val('');
            $('#telefono_empresa').val('');
            $('#email_info_laboral').val('');
            $('#direccion_info_laboral').val('');
            $('#departamento_info_laboral').append('<option value="" selected>Seleccione</option>');
            $('#municipio_info_laboral').append('<option value="" selected>Seleccione</option>');
            $('#pais_exterior_info_laboral').val('');
            $('#actividad_economica').append('<option value="" selected>Seleccione</option>');
            $('#clase_riesgo').append('<option value="" selected>Seleccione</option>');
            $('#persona_contacto').val('');
            $('#telefono_persona_contacto').val('');
            $('#codigo_ciuo').append('<option value="" selected>Seleccione</option>');
            $('#fecha_ingreso').val('');
            $('#cargo').val('');
            $('#funciones_cargo').val('');
            $('#antiguedad_empresa').val('');
            $('#antiguedad_cargo').val('');
            $('#fecha_retiro').val('');
            $('#medio_notificacion_laboral').append('<option value="" selected>Seleccione</option>');
            $('#descripcion').val('');
        }
    });
    
    /* VALIDACIÓN MOSTRAR CAMPOS LABORAL MODAL REGISTRAR */ 
    $("#empleo_actual_registrar").change(function(){
        let opt_tipoempleo = $('#empleo_actual_registrar').val();
        if (opt_tipoempleo === "Empleado actual"){                    
            $(".columna_row1_laboral_registrar").slideDown('slow');
            $(".columna_row2_laboral_registrar").slideDown('slow');
            $(".columna_row3_laboral_registrar").slideDown('slow');
            $(".columna_row4_laboral_registrar").slideDown('slow');
            $(".columna_row5_laboral_registrar").slideDown('slow');
            document.getElementById('empresa_registrar').required = true;
            document.getElementById('nit_cc_registrar').required = true;
        }
    }); 

    $("#independiente_registrar").change(function(){
        let opt_tipoempleo = $('#independiente_registrar').val();
        if (opt_tipoempleo === "Independiente"){                           
            $(".columna_row1_laboral_registrar").slideUp('slow');
            $(".columna_row2_laboral_registrar").slideUp('slow');
            $(".columna_row3_laboral_registrar").slideUp('slow');
            $(".columna_row4_laboral_registrar").slideUp('slow');
            $(".columna_row5_laboral_registrar").slideUp('slow');
            document.getElementById('empresa_registrar').required = false;
            document.getElementById('nit_cc_registrar').required = false;
        }
    }); 

    $("#beneficiario_registrar").change(function(){
        let opt_tipoempleo = $('#beneficiario_registrar').val();
        if (opt_tipoempleo === "Beneficiario"){                           
            $(".columna_row1_laboral_registrar").slideUp('slow');
            $(".columna_row2_laboral_registrar").slideUp('slow');
            $(".columna_row3_laboral_registrar").slideUp('slow');
            $(".columna_row4_laboral_registrar").slideUp('slow');
            $(".columna_row5_laboral_registrar").slideUp('slow');
            document.getElementById('empresa_registrar').required = false;
            document.getElementById('nit_cc_registrar').required = false;
        }
    });

    /* 
        Funcionalidad para deshabilitar el formulario de edición evento Excepto para:
        Historial de Acciones, Histórico de empresas para el rol de consulta
    */

    var idRol = $("#id_rol").val();
    if (idRol == 7) {
        // Desactivar todos los elementos excepto los especificados
        $(':input, select, a, button').not('#listado_roles_usuario, #his_servicios, #cargar_historial_acciones, #llenar_tabla_historico_empresas, .btn-danger').prop('disabled', true);
    }

});
